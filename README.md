## keymaster monorepo

### üåê Language

- [English](README.md) (current)
- [‰∏≠Êñá](README.zh.md)

<div align="center">

<img src="https://img.shields.io/npm/v/@keekuun/keymaster-react?label=react&style=flat-square" alt="@keekuun/keymaster-react version" />
<img src="https://img.shields.io/npm/v/@keekuun/keymaster-vue?label=vue&style=flat-square" alt="@keekuun/keymaster-vue version" />
<img src="https://img.shields.io/npm/v/@keekuun/keymaster-core?label=core&style=flat-square" alt="@keekuun/keymaster-core version" />

<br />

<img src="https://img.shields.io/npm/l/@keekuun/keymaster-react?style=flat-square" alt="License" />
<img src="https://img.shields.io/badge/TypeScript-Ready-blue?style=flat-square&logo=typescript" alt="TypeScript Ready" />
<img src="https://img.shields.io/badge/Docs-Vercel-success?style=flat-square&logo=vercel" alt="Docs on Vercel" />

<p><strong>A modern keyboard shortcut library monorepo for React / Vue / Core utilities, supporting scoped binding, editor mode, and Electron scenarios.</strong></p>

<p>
<a href="#-features">Features</a> ‚Ä¢
<a href="#-installation">Installation</a> ‚Ä¢
<a href="#-quick-start">Quick Start</a> ‚Ä¢
<a href="#-packages--versions">Packages & Versions</a> ‚Ä¢
<a href="#-monorepo-development">Monorepo Development</a> ‚Ä¢
<a href="#-publishing-process">Publishing Process</a>
</p>

</div>

---

### ‚ú® Features

- üéØ **Precise Shortcut Parsing**: Supports key combinations, multi-key mapping, and cross-platform modifier key handling
- üß† **Shared Core Module**: `@keekuun/keymaster-core` unified management of parsing, matching, types, and utility functions
- üß© **Scoped Binding (scopedElement)**: Only responds to shortcuts within specified containers / editors
- ‚úèÔ∏è **Editor Mode (editorMode)**: Automatically `preventDefault`, suitable for editor-like products
- üñ•Ô∏è **Electron Mode (electronMode)**: Extension points reserved for desktop applications
- ‚öõÔ∏è **React Hook Wrapper**: `useKeyBinding` / `useScopedKeyBinding` / `useEditorKeyBinding` / `useElectronKeyBinding`
- üß™ **Vue Composition API**: `useKeyBindingVue` / `useScopedKeyBindingVue` / `useEditorKeyBindingVue` / `useElectronKeyBindingVue`
- üì¶ **TypeScript First**: Complete declaration files, automatically generated by `vite-plugin-dts`
- üìö **Complete Documentation Site**: Interactive documentation based on VitePress, supporting multi-version management and online demos

---

### üì¶ Installation

**React Version:**

```bash
npm install @keekuun/keymaster-react
# or
pnpm add @keekuun/keymaster-react
# or
yarn add @keekuun/keymaster-react
```

**Vue Version:**

```bash
npm install @keekuun/keymaster-vue
# or
pnpm add @keekuun/keymaster-vue
# or
yarn add @keekuun/keymaster-vue
```

**Core Module (usually auto-installed as dependency, can also be used standalone):**

```bash
npm install @keekuun/keymaster-core
```

---

### üöÄ Quick Start

#### React Basic Usage

```tsx
import { useKeyBinding } from '@keekuun/keymaster-react';

function App() {
  useKeyBinding('ctrl+s', (event) => {
    event.preventDefault();
    console.log('Save operation');
  });

  return <div>Press Ctrl + S to save</div>;
}
```

**Scoped Binding Example:**

```tsx
import { useRef } from 'react';
import { useScopedKeyBinding } from '@keekuun/keymaster-react';

function Editor() {
  const containerRef = useRef<HTMLDivElement | null>(null);

  useScopedKeyBinding(
    'ctrl+k',
    () => {
      console.log('Shortcut only works within container');
    },
    containerRef,
  );

  return <div ref={containerRef}>Ctrl + K only works here</div>;
}
```

#### Vue Basic Usage

```vue
<script setup lang="ts">
import { useKeyBindingVue } from '@keekuun/keymaster-vue';

useKeyBindingVue('ctrl+s', (event) => {
  event.preventDefault();
  console.log('Save operation');
});
</script>

<template>
  <div>Press Ctrl + S to save</div>
</template>
```

**Editor Mode Example:**

```vue
<script setup lang="ts">
import { ref } from 'vue';
import { useEditorKeyBindingVue } from '@keekuun/keymaster-vue';

const editorRef = ref<HTMLTextAreaElement | null>(null);

useEditorKeyBindingVue(
  'ctrl+s',
  () => {
    console.log('Save in editor, no browser default behavior');
  },
  editorRef.value || undefined,
);
</script>

<template>
  <textarea ref="editorRef" rows="6" cols="40" />
</template>
```

More examples (including Electron mode and advanced usage) can be found on the documentation site.

---

### üì¶ Packages & Versions

The current monorepo contains the following sub-packages:

- `@keekuun/keymaster-core`: Core parsing / matching / type definition module
- `@keekuun/keymaster-react`: React Hook wrapper
- `@keekuun/keymaster-vue`: Vue Composition API wrapper
- `keymaster-docs`: Documentation and example site based on VitePress

#### Currently Published Versions

- `@keekuun/keymaster-core`: **v0.3.0** - [npm](https://www.npmjs.com/package/@keekuun/keymaster-core)
- `@keekuun/keymaster-react`: **v0.3.0** - [npm](https://www.npmjs.com/package/@keekuun/keymaster-react)
- `@keekuun/keymaster-vue`: **v0.3.0** - [npm](https://www.npmjs.com/package/@keekuun/keymaster-vue)

#### Documentation Site

- Online Documentation: [https://keymaster-docs.vercel.app/](https://keymaster-docs.vercel.app/)
  - React Documentation: `/react/`
  - Vue Documentation: `/vue/`
  - Core Documentation: `/core/`
  - Version Management: `/versions/`

#### Package Dependencies

```text
@keekuun/keymaster-core (core module)
    ‚îú‚îÄ‚îÄ @keekuun/keymaster-react (depends on core)
    ‚îî‚îÄ‚îÄ @keekuun/keymaster-vue (depends on core)
```

**Important Notes:**

- `keymaster-core` is a runtime dependency of `keymaster-react` and `keymaster-vue`
- When installing `@keekuun/keymaster-react` or `@keekuun/keymaster-vue`, `@keekuun/keymaster-core` will be automatically installed
- Only install `@keekuun/keymaster-core` separately if you need to use core utility functions alone

---

### üß± Monorepo Development

This repository uses **pnpm workspace** to manage the multi-package structure. Root directory scripts:

- `pnpm build`: Recursively build all packages (core / react / vue / docs)
- `pnpm lint`: Run ESLint checks for all packages and root directory
- `pnpm lint:fix`: Run ESLint auto-fix for all packages and root directory
- `pnpm format`: Check formatting with Prettier
- `pnpm format:write`: Auto-format with Prettier
- `pnpm docs:dev`: Start documentation dev server in `apps/keymaster-docs`
- `pnpm docs:build`: Build all libraries + documentation site
- `pnpm docs:preview`: Preview built documentation site

Before commit, Husky will automatically execute:

- ESLint auto-fix (all packages)
- Prettier auto-formatting

---

### üö¢ Publishing Process (Overview)

For detailed steps, see `PUBLISH.md`. Here's a brief overview:

1. Confirm code passes `pnpm lint`, `pnpm test` (if any), `pnpm docs:build`
2. Use `standard-version` to manage versions and `CHANGELOG.md`:
   - `pnpm release`: Patch version
   - `pnpm release:minor`: Minor version
   - `pnpm release:major`: Major version
3. Use publishing scripts to publish to npm:
   - `pnpm publish:core`
   - `pnpm publish:react`
   - `pnpm publish:vue`
   - Or `pnpm publish:all` to publish all three packages at once
4. Push code and tags, Vercel will automatically trigger documentation site update

---

### üìÆ Feedback & Support

- Repository: [https://github.com/Keekuun/keymaster](https://github.com/Keekuun/keymaster)
- Issue Reports / Feature Suggestions: Create entries in GitHub Issues
- Usage Questions & API Details: Refer to documentation site [https://keymaster-docs.vercel.app/](https://keymaster-docs.vercel.app/)
